# CSSアーキテクチャドキュメント

このドキュメントでは、AiraPJにおけるCSSファイルの管理方針と定義について説明します。

## 目次

- [概要](#概要)
- [CSSファイルの役割分担](#cssファイルの役割分担)
- [index.css - グローバルスタイル](#indexcss---グローバルスタイル)
- [App.css - アプリケーションスタイル](#appcss---アプリケーションスタイル)
- [スタイル管理の原則](#スタイル管理の原則)
- [新しいスタイルを追加する際のガイドライン](#新しいスタイルを追加する際のガイドライン)

## 概要

AiraPJでは、2つの主要なCSSファイルを使用してスタイルを管理しています：

1. **`/src/index.css`** - グローバルスタイル・基礎スタイル
2. **`/src/App.css`** - アプリケーション固有のスタイル

これらのファイルは明確な責任分担を持ち、保守性と拡張性を確保しています。

## CSSファイルの役割分担

### ファイル構成

```
src/
├── index.css      # グローバルスタイル（基礎層）
├── App.css        # アプリケーションスタイル（アプリケーション層）
├── main.tsx       # index.cssをインポート
└── App.tsx        # App.cssをインポート
```

### インポート順序

1. `main.tsx` で `index.css` をインポート
2. `App.tsx` で `App.css` をインポート

この順序により、グローバルスタイルが先に適用され、アプリケーション固有のスタイルで必要に応じてオーバーライドできます。

## index.css - グローバルスタイル

### 役割

`index.css` は**アプリケーション全体の基礎となるスタイル**を定義します。すべてのページ・コンポーネントに共通する基本的な見た目とふるまいを規定します。

### 主な定義対象

#### 1. ルート変数とフォント設定

```css
:root {
  /* フォント、配色、背景グラデーションの定義 */
}
```

**目的**: アプリケーション全体のフォントファミリー、配色、背景グラデーションを一元管理

#### 2. HTML基本要素

```css
a {
  /* リンクの基本スタイル */
}

a:hover {
  /* ホバー時の光彩効果 */
}

body {
  /* ページ全体のレイアウト */
}

body::before {
  /* キラキラ背景エフェクト */
}

h1 {
  /* 見出しのスタイル */
}

button {
  /* ボタンの基本デザイン */
}

button::before {
  /* リップル効果用疑似要素 */
}

button:hover,
button:active,
button:focus,
button:disabled {
  /* 各状態のスタイル */
}
```

**目的**:
- `a`: リンクの視認性確保とホバー時の光彩効果
- `body`: ページ全体のレイアウト基盤とキラキラ背景
- `h1`: 見出しの統一された外観
- `button`: すべてのボタンの統一デザイン（グラデーション、ホバー、フォーカス、リップル効果）

#### 3. タブUI（キャラクターパーツ選択画面用）

```css
.tab-bar {
  /* タブバーコンテナ */
}

.tab-btn {
  /* タブボタンの基本スタイル */
}

.tab-btn.active {
  /* アクティブタブのスタイル */
}

.tab-btn:not(.active):hover {
  /* 非アクティブタブのホバー時スタイル */
}

.tab-btn:focus {
  /* フォーカス時のスタイル */
}

@media (max-width: 600px) {
  .tab-bar {
    /* モバイル向けのタブバースタイル */
  }
  .tab-btn {
    /* モバイル向けのタブボタンスタイル */
  }
}
```

**目的**: 
- `.tab-bar`: タブボタンを横並びに配置するコンテナ
- `.tab-btn`: タブボタンの基本デザイン（角丸、パディング、色）
- `.tab-btn.active`: アクティブなタブの視覚的な強調表示
- `.tab-btn:not(.active):hover`: 非アクティブタブのホバー時のフィードバック
- `.tab-btn:focus`: キーボードフォーカス時のアクセシビリティ対応
- モバイルレスポンシブ: 画面幅600px以下でタブが均等幅になるように調整

#### 4. レイアウト制約

```css
.main-container {
  /* メインコンテンツコンテナの最大幅制限とパディング */
}

body {
  overflow-x: hidden;
  /* 横スクロールの防止 */
}

h1 {
  word-break: break-word;
  overflow-wrap: break-word;
  max-width: 100%;
  /* 長いタイトルのオーバーフロー防止 */
}
```

**目的**:
- `.main-container`: レスポンシブデザインのための幅制限とパディング
- `body`: 横スクロールの防止
- `h1`: 長いテキストの折り返し処理とレイアウト崩れ防止

#### 5. ページ遷移アニメーション

```css
.page-fade-enter {
  /* フェードイン開始状態 */
}

.page-fade-enter-active {
  /* フェードイン完了状態 */
}

.page-fade-exit {
  /* フェードアウト開始状態 */
}

.page-fade-exit-active {
  /* フェードアウト完了状態 */
}
```

**目的**: ページ遷移時のスムーズなフェードイン・フェードアウト効果

#### 6. カラーモード対応

```css
@media (prefers-color-scheme: light) {
  :root {
    /* ライトテーマ用の配色 */
  }
  /* その他の要素の色調整 */
}
```

**目的**: システムのカラーモード設定に対応したライトテーマの提供

### 管理方針

- アプリケーション全体に影響する基本的な見た目を変更したい場合に編集
- 変更時は影響範囲が大きいため、十分にテストを実施

## App.css - アプリケーションスタイル

### 役割

`App.css` は**アプリケーション固有のUIコンポーネントやレイアウト**のスタイルを定義します。着せ替えゲームの機能に特化したスタイルを管理します。

### 主な定義対象

#### 1. ルートコンテナ

```css
#root {
  /* アプリケーションコンテナの最大幅、中央寄せ */
}
```

**目的**: アプリケーションコンテナの最大幅制限と中央寄せレイアウト

#### 2. アニメーション効果

```css
.main-container {
  /* コンテンツのフェードイン */
}

.sparkle-particle {
  /* キラキラパーティクルの表示 */
}

@keyframes fadeIn {
  /* フェードインアニメーション */
}

@keyframes float {
  /* 浮遊アニメーション */
}
```

**目的**:
- `.main-container`: コンテンツ表示時のフェードイン効果
- `.sparkle-particle`: 画面上を漂うキラキラエフェクト
- アニメーション定義でファンタジー感を演出

#### 3. 機能的UIコンポーネント

```css
.select-container {
  /* 背景・衣装選択エリアのグラスモーフィズムデザイン */
}

#background-info,
#costume-info {
  /* 選択中のアイテム情報表示 */
}

#background-info:hover,
#costume-info:hover {
  /* ホバー時のインタラクティブ効果 */
}

.asset-list {
  /* アセット一覧リスト */
}

.asset-list li {
  /* 各アセット項目 */
}

.asset-list li:hover {
  /* ホバー時のスライドアニメーション */
}
```

**目的**:
- `.select-container`: グラスモーフィズムデザインの選択エリア
- `#background-info`, `#costume-info`: 選択中のアイテム情報を表示
- `.asset-list`: 管理画面でのアセット一覧表示

#### 4. 特殊な入力要素

```css
input[type="range"] {
  /* スライダーの基本デザイン */
}

input[type="range"]::-webkit-slider-thumb,
input[type="range"]::-moz-range-thumb {
  /* スライダーのつまみカスタマイズ */
}

input[type="text"],
input[type="file"],
select {
  /* フォーム要素の統一デザイン */
}

input[type="text"]:focus,
select:focus {
  /* フォーカス時の光彩効果 */
}
```

**目的**:
- `input[type="range"]`: キャラクター拡縮スライダーのカスタムデザイン
- `input[type="text"]`, `select`: フォーム要素の統一されたデザインとフォーカス効果

#### 5. 特定機能のスタイル

```css
.button-wrapper {
  /* ボタンのリップル効果コンテナ */
}

#settings-icon {
  /* 設定アイコン */
}

#settings-icon:hover img {
  /* ホバー時の回転・拡大効果 */
}

#sound-toggle button {
  /* BGM/SEトグルボタン専用デザイン */
}

.logo {
  /* ロゴの基本スタイル */
}

.logo:hover {
  /* ロゴのホバー効果 */
}

@keyframes logo-spin {
  /* ロゴ回転アニメーション */
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    /* モーション許可時のロゴアニメーション */
  }
}

.card {
  /* カードコンポーネント */
}

.read-the-docs {
  /* ドキュメントリンク */
}
```

**目的**:
- `#settings-icon`: 設定アイコンの回転・拡大効果
- `#sound-toggle button`: BGM/SEトグルボタンの専用デザイン
- `.logo`: ロゴアニメーション（モーション設定への配慮あり）
- その他のアプリケーション固有コンポーネント

### 管理方針

- 特定の機能やコンポーネントのデザインを変更したい場合に編集
- 特定のID・クラス名に依存しているため、HTML構造との整合性を保つ

## スタイル管理の原則

### 1. 責任の分離

- **`index.css`**: グローバル・基礎スタイル（全体に影響）
- **`App.css`**: アプリケーション固有スタイル（特定機能に影響）

### 2. カスケードの活用

`index.css` → `App.css` の順にインポートされるため、必要に応じて `App.css` で `index.css` のスタイルをオーバーライドできます。

### 3. 一貫性の維持

#### 色の使用
- **プライマリグラデーション**: `#667eea` から `#764ba2`
- **背景透過**: `rgba(255, 255, 255, 0.05)` など
- **光彩効果**: `rgba(102, 126, 234, 0.x)` のバリエーション

#### トランジション
- 多くの要素で `transition: all 0.3s ease` を使用

#### ボーダーラジウス
- 角丸の度合いは `8px` ～ `16px` を基準に使い分け

### 4. アクセシビリティへの配慮

- `:focus-visible` でキーボード操作時のフォーカス表示
- `prefers-reduced-motion` でモーション抑制設定に対応
- `prefers-color-scheme` でシステムのカラーモードに対応

### 5. パフォーマンス最適化

- `will-change` プロパティでアニメーション最適化
- `backdrop-filter` でグラスモーフィズム効果
- CSS Animationで滑らかな動き

## 新しいスタイルを追加する際のガイドライン

### どちらのファイルに追加すべきか？

#### `index.css` に追加する場合

- アプリケーション全体で使用される要素のスタイル
- 新しいHTML基本要素のスタイル（例: `ul`, `ol`, `table` など）
- 全ページで共通するアニメーション・トランジション
- グローバルなCSS変数の追加
- 複数の画面で再利用される共通UIコンポーネント（例: タブUI、モーダルなど）

#### `App.css` に追加する場合

- 特定の画面・機能に固有のスタイル
- ID・クラス名で特定されるコンポーネントのスタイル
- 特定の機能に関連するアニメーション
- 既存のグローバルスタイルのオーバーライド

### スタイル追加のベストプラクティス

1. **既存のパターンに従う**
   - 既存のスタイルと同じ命名規則・記述方法を使用
   - 既存の色・サイズ・アニメーションの値を再利用

2. **特異性を適切に管理**
   - 必要最小限のセレクタを使用
   - `!important` の使用は避ける

3. **コメントを追加**
   - 複雑なスタイルには目的を説明するコメントを追加
   - セクション区切りのコメントで可読性を向上

4. **レスポンシブ対応**
   - 必要に応じてメディアクエリを追加
   - モバイル・タブレット・デスクトップでの表示を確認

5. **ブラウザ互換性**
   - ベンダープレフィックスが必要な場合は追加（例: `-webkit-`, `-moz-`）
   - 新しいCSS機能を使用する場合はフォールバックを検討

## まとめ

### index.css

- **役割**: グローバルスタイル・基礎スタイル
- **対象**: HTML基本要素、全体の配色・フォント、共通アニメーション
- **変更頻度**: 低（アプリ全体のデザイン刷新時のみ）

### App.css

- **役割**: アプリケーション固有スタイル
- **対象**: 特定機能のコンポーネント、ID/クラス指定要素
- **変更頻度**: 中〜高（機能追加・改善時）

### 管理のポイント

1. **責任を明確に分離**: グローバル vs アプリケーション固有
2. **一貫性を保つ**: 色・サイズ・アニメーションの値を統一
3. **既存パターンに従う**: 新規追加時は既存スタイルを参考に
4. **影響範囲を理解**: 変更前に影響範囲を確認
5. **テストを実施**: 変更後は複数の画面・デバイスで動作確認

このドキュメントを参考に、保守性の高いCSS管理を実現してください。

<!-- タイトル画面 / Title Screen -->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>タイトル画面</title>
  <link rel="stylesheet" href="/styles/title.css">
</head>
<body>
  <script>
    // 初回アクセス時のみ音確認ダイアログを表示
    if (!sessionStorage.getItem('soundConfirmed')) {
      window.addEventListener('DOMContentLoaded', function() {
        setTimeout(function() {
          const ok = confirm('このゲームではおんがくがなります。おとをだしてもいい？\nBGM/SEのON,OFFは後から設定画面でも変更できます。');
          sessionStorage.setItem('soundConfirmed', '1');
          localStorage.setItem('bgmOn', ok ? '1' : '0');
          localStorage.setItem('seOn', ok ? '1' : '0');
        }, 300);
      });
    }
  </script>
  <!-- BGM/SEの再生用audioタグ（サイト全体で利用） -->
  <audio id="bgm" src="/assets/sound/bgm/main.mp3" loop></audio>
  <audio id="se" src="/assets/sound/se/main.mp3"></audio>
  <script>
    // BGM/SEのON/OFF制御
    function playBGM() {
      if (localStorage.getItem('bgmOn') === '1') {
        document.getElementById('bgm').play();
      }
    }
    function stopBGM() {
      document.getElementById('bgm').pause();
      document.getElementById('bgm').currentTime = 0;
    }
    function playSE() {
      if (localStorage.getItem('seOn') === '1') {
        const se = document.getElementById('se');
        se.currentTime = 0;
        se.play();
      }
    }
    // ページ表示時にBGM自動再生（ONの場合のみ）
    window.addEventListener('DOMContentLoaded', playBGM);
  </script>
  <header>
    <a href="/settings" id="settings-icon" title="設定">
      <img src="/assets/gear.svg" alt="設定" style="width:32px;height:32px;">
    </a>
  </header>
  <main>
    <h1>Aira PJ</h1>
    <form action="/character" method="get" id="start-form">
      <button type="submit" id="start-btn">ゲームをはじめる</button>
    </form>
    <div>
      <a href="/history" id="favorites-menu">おきにいり</a>
    </div>
    <script>
      // スタートボタン押下時にSEを鳴らす
      document.getElementById('start-form').addEventListener('submit', function(e) {
        playSE();
      });
      // おきにいりクリック時にもSEを鳴らす（例）
      document.getElementById('favorites-menu').addEventListener('click', function(e) {
        playSE();
      });
    </script>
  </main>
  <footer>
    <a href="/terms" id="terms-link" style="font-size:small;">規約・クレジット</a>
  </footer>
</body>
</html>
